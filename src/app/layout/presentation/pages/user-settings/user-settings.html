<mat-toolbar>
  <button mat-icon-button (click)="goBack()">
    <mat-icon>arrow_back</mat-icon>
  </button>
  <span class="ml-4">Configuraciones</span>
</mat-toolbar>
<div class="mx-auto max-w-4xl p-4 sm:p-2">
  <div>
    <h3 class="text-2xl font-semibold">Configuracion del usuario</h3>
    <p class="mt-1 max-w-2xl text-sm/6">Cambie su datos de acceso</p>
  </div>
  <div class="mt-6 border-t border-gray-200">
    <form [formGroup]="formUser" (ngSubmit)="save()">
      <dl class="divide-y divide-gray-200">
        <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
          <dt class="text-sm/6 font-medium">Nombre</dt>
          <dd class="mt-1 text-sm/6 sm:col-span-2 sm:mt-0">
            {{ user()?.fullname | titlecase }}
          </dd>
        </div>
        <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
          <dt class="text-sm/6 font-medium">Contraseña</dt>
          <dd class="mt-1 sm:col-span-2 sm:mt-0 space-y-6 sm:max-w-[500px]">
            <mat-form-field appearance="outline">
              <mat-label>Nueva contraseña</mat-label>
              <input
                matInput
                autocomplete="off"
                formControlName="password"
                value="Ingrese su nueva contraseña"
                [type]="hidePassword() ? 'password' : 'text'"
              />
              <button
                type="button"
                mat-icon-button
                matSuffix
                (click)="togglePasswordVisibility()"
                [attr.aria-label]="'Hide password'"
                [attr.aria-pressed]="hidePassword()"
              >
                <mat-icon>
                    {{ hidePassword() ? "visibility_off" : "visibility" }}
                </mat-icon>
              </button>

              @if (formUser.get('password')?.hasError) {
                <mat-error>
                    {{ formUser.get("password")?.errors |
                    formErrorMessages:ERROR_MESSAGES?.['password'] }}
                </mat-error>
              }

            </mat-form-field>
            @if ( formUser.get("password")?.value) {
                <mat-form-field appearance="outline">
                <mat-label>Confirmar contraseña</mat-label>
                <input
                    matInput
                    autocomplete="off"
                    formControlName="confirmPassword"
                    value="Ingrese su nueva contraseña"
                    [type]="hideConfirmPassword() ? 'password' : 'text'"
                />
                <button
                    type="button"
                    mat-icon-button
                    matSuffix
                    (click)="togflecConfirmPasswordVisibility()"
                    [attr.aria-label]="'Hide confirm password'"
                    [attr.aria-pressed]="hideConfirmPassword()"
                >
                    <mat-icon>
                    {{ hideConfirmPassword() ? "visibility_off" : "visibility" }}
                    </mat-icon>
                </button>
                @if (formUser.get('confirmPassword')?.hasError) {
                    <mat-error>
                        {{ formUser.get("confirmPassword")?.errors |formErrorMessages:ERROR_MESSAGES?.['confirmPassword'] }}
                    </mat-error>
                }
                </mat-form-field>
            }
          </dd>
        </div>
      </dl>
      <div class="flex justify-end mt-2">
        <button matFab extended [disabled]="formUser.invalid" type="submit">
            <mat-icon>save</mat-icon>
            Guardar
        </button>
      </div>
    </form>
  </div>
</div>
